{"version":3,"sources":["../app.js"],"names":["module","exports","app","beforeStart","console","log","config","redis","client","mysql","query","invokeEntitys","set","JSON","stringify","once","messenger","on","data"],"mappings":";;;;AAAAA,OAAOC,OAAP,GAAiB,eAAO;AACpBC,QAAIC,WAAJ,yDAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AACZ;AACAC,gCAAQC,GAAR,CAAY,UAAZ;AACA;;AAHY,6BAKTH,IAAII,MAAJ,CAAWC,KAAX,CAAiBC,MALR;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAMkBN,IAAIO,KAAJ,CAAUC,KAAV,6BANlB;;AAAA;AAMFC,qCANE;AAAA;AAAA,+BAOFT,IAAIK,KAAJ,CAAUK,GAAV,CAAc,eAAd,EAA+BC,KAAKC,SAAL,CAAeH,aAAf,CAA/B,CAPE;;AAAA;AASZP,gCAAQC,GAAR,CAAY,WAAZ;;AATY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;;AAaAH,QAAIa,IAAJ,CAAS,QAAT,EAAmB,kBAAU;AACzB;AACH,KAFD;;AAIAb,QAAIc,SAAJ,CAAcC,EAAd,CAAiB,eAAjB,EAAkC,gBAAQ;AACtCb,gBAAQC,GAAR,CAAY,eAAZ;AACAH,YAAIS,aAAJ,GAAkBO,IAAlB;AACH,KAHD;AAIH,CAtBD","file":"app.js","sourcesContent":["module.exports = app => {\n    app.beforeStart(async () => {\n        // 应用会等待这个函数执行完成才启动\n        console.log('init app');\n        //console.log(app.config.redis.client)\n\n        if(app.config.redis.client){\n            const invokeEntitys=await app.mysql.query(`select * from invoke_info`);\n            await app.redis.set('invokeEntitys', JSON.stringify(invokeEntitys));\n        }\n        console.log('app start');\n\n    });\n\n    app.once('server', server => {\n        //app.logger.info(server.restful);\n    });\n\n    app.messenger.on('invokeEntitys', data => {\n        console.log('invokeEntitys');\n        app.invokeEntitys=data;\n    });\n};\n"]}